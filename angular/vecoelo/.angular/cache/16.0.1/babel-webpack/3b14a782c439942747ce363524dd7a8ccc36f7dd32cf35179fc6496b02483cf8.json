{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./forum.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/router\";\nfunction ForumComponent_figure_9_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const post_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Derni\\u00E8re activit\\u00E9 : \", ctx_r2.formatDateTime(ctx_r2.getLastActivityDate(post_r1)), \"\");\n  }\n}\nfunction ForumComponent_figure_9_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\");\n    i0.ɵɵtext(2, \"Aucune activit\\u00E9\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/post\", a1];\n};\nfunction ForumComponent_figure_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"figure\");\n    i0.ɵɵelement(1, \"img\", 5);\n    i0.ɵɵelementStart(2, \"figcaption\")(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"time\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"h3\")(8, \"span\");\n    i0.ɵɵtext(9, \"de\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n    i0.ɵɵtext(13, \"Sujet :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 6);\n    i0.ɵɵtemplate(16, ForumComponent_figure_9_div_16_Template, 3, 1, \"div\", 7);\n    i0.ɵɵtemplate(17, ForumComponent_figure_9_div_17_Template, 3, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"a\", 8);\n    i0.ɵɵtext(19, \"Voir la publication\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ForumComponent_figure_9_Template_button_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const post_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deletePost(post_r1.id));\n    });\n    i0.ɵɵelementStart(21, \"i\", 10);\n    i0.ɵɵtext(22, \"delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", post_r1.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", post_r1.autreProbleme || post_r1.objet, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.formatDateTime(post_r1.date));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", post_r1.auteur, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", post_r1.resume, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", post_r1.replies && post_r1.replies.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(post_r1.replies && post_r1.replies.length > 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(8, _c0, post_r1.id));\n  }\n}\nclass ForumComponent {\n  constructor(forumService) {\n    this.forumService = forumService;\n    this.searchText = '';\n    this.filteredPosts = [];\n    this.lastActivityDate = null;\n  }\n  get posts() {\n    // Récupérer les publications du service\n    const allPosts = this.forumService.getProblems();\n    const sortedPosts = allPosts.sort((a, b) => {\n      const lastActivityDateA = new Date(this.getLastActivityDate(a));\n      const lastActivityDateB = new Date(this.getLastActivityDate(b));\n      const publicationDateA = new Date(a.timestamp);\n      const publicationDateB = new Date(b.timestamp);\n      if (isNaN(lastActivityDateA.getTime())) {\n        return 1; // Gérer le cas où la dernière activité de la publication A est invalide\n      }\n\n      if (isNaN(lastActivityDateB.getTime())) {\n        return -1; // Gérer le cas où la dernière activité de la publication B est invalide\n      }\n      // Tri par la dernière activité\n      if (lastActivityDateB.getTime() !== lastActivityDateA.getTime()) {\n        return lastActivityDateB.getTime() - lastActivityDateA.getTime();\n      }\n      // Tri par la dernière publication si les dernières activités sont les mêmes\n      return publicationDateB.getTime() - publicationDateA.getTime();\n    });\n    return sortedPosts;\n  }\n  deletePost(postId) {\n    this.forumService.deletePost(postId);\n  }\n  filterPosts() {\n    if (this.searchText) {\n      this.filteredPosts = this.posts.filter(post => post.objet.toLowerCase().includes(this.searchText.toLowerCase()) || post.autreProbleme && post.autreProbleme.toLowerCase().includes(this.searchText.toLowerCase()));\n    } else {\n      this.filteredPosts = this.posts;\n    }\n  }\n  getLastActivityDate(post) {\n    const replies = post.replies;\n    if (replies && replies.length > 0) {\n      return replies[replies.length - 1].lastActivityDate;\n    } else {\n      return \"Aucune activité\";\n    }\n  }\n  formatDateTime(dateTime) {\n    if (!dateTime) {\n      return \"\"; // Gérer le cas où dateTime est vide ou non défini\n    }\n\n    const date = new Date(dateTime);\n    date.setHours(date.getHours() + 2);\n    const options = {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n      timeZone: 'UTC'\n    };\n    const formatter = new Intl.DateTimeFormat('fr-FR', options);\n    if (isNaN(date.getTime())) {\n      return \"\"; // Gérer le cas où dateTime n'est pas une date valide\n    }\n\n    return formatter.format(date);\n  }\n}\nForumComponent.ɵfac = function ForumComponent_Factory(t) {\n  return new (t || ForumComponent)(i0.ɵɵdirectiveInject(i1.ForumService));\n};\nForumComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ForumComponent,\n  selectors: [[\"forum\"]],\n  decls: 10,\n  vars: 2,\n  consts: [[1, \"filter-section\"], [\"routerLink\", \"/post-probleme\", 1, \"btn-poster\"], [\"type\", \"text\", \"placeholder\", \"Rechercher...\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"onclick\", \"location.reload()\", 1, \"btn-poster\"], [4, \"ngFor\", \"ngForOf\"], [\"alt\", \"\", 3, \"src\"], [1, \"post-activity\"], [4, \"ngIf\"], [3, \"routerLink\"], [1, \"delete-button\", 3, \"click\"], [1, \"material-icons\"]],\n  template: function ForumComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"main\")(1, \"h2\");\n      i0.ɵɵtext(2, \"FORUM\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"section\", 0)(4, \"button\", 1);\n      i0.ɵɵtext(5, \"nouveau probl\\u00E8me\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ForumComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.searchText = $event;\n      })(\"input\", function ForumComponent_Template_input_input_6_listener() {\n        return ctx.filterPosts();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 3);\n      i0.ɵɵtext(8, \"Actualiser\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(9, ForumComponent_figure_9_Template, 23, 10, \"figure\", 4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchText);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredPosts.length > 0 ? ctx.filteredPosts : ctx.posts);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.RouterLink],\n  styles: [\"main[_ngcontent-%COMP%]{\\n    padding: 1rem;\\n    max-width: 140rem;\\n    margin: 1rem auto;\\n    \\n}\\nmain[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\n    font-size: 4rem;\\n    color: #fff;\\n    margin: 2rem auto;\\n    font-weight: bold;\\n    text-align: center;\\n}\\nh3[_ngcontent-%COMP%]{\\n    font-size: 1.8rem;\\n    font-weight: bold;\\n    margin: 0 auto 1rem auto;\\n    color: #000000d5;\\n}\\nh3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{\\n    font-weight: normal;\\n}\\nfigure[_ngcontent-%COMP%]{\\n    margin: 2rem auto;\\n    box-shadow: 0 0 .5rem rgba(0, 0, 0, 0.179);\\n    padding: 1rem 2rem;\\n    background-color: #fff;\\n    border-radius: .75rem;\\n\\n    box-shadow:  .5rem .5rem 1rem #0000003d,\\n                -.5rem -.5rem 1rem #ffffff31;\\n    align-items: center;\\n    display: flex;\\n    position: relative;\\n\\n}\\nfigure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\\n    width: 15rem;\\n    height: 15rem;\\n    object-fit: contain;\\n}\\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{\\n    padding: 1rem;\\n    margin: 0rem 2rem;\\n    \\n}\\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\\n    padding: 1rem 0;\\n}\\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\n    font-size: 3rem;\\n    color: #000;\\n    font-weight: bold;\\n    text-transform: capitalize;\\n    text-align: start;\\n    margin: 1rem auto;\\n}\\ntime[_ngcontent-%COMP%]{\\n    font-size: 1.8rem !important;\\n    font-weight: regular !important;\\n    text-align: start;\\n    color: #001343;\\n}\\n.filter-section[_ngcontent-%COMP%]{\\n    display: flex;\\n    justify-content: space-around;\\n    align-items: center;\\n    margin: 1rem auto;\\n    padding: 1rem 2rem;\\n    border-radius: .5rem;\\n    background-color: #fafafa;\\n    box-shadow: 0 0 .5rem rgba(0, 0, 0, 0.179);\\n}\\n.filter-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{\\n    padding: 1rem;\\n    margin: 1rem auto;\\n    border-radius: .5rem;\\n    width: 60rem;\\n    background-color: #f7f7f7;\\n    border: solid .1rem #ccc;\\n}\\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]   time[_ngcontent-%COMP%]{\\n    font-size: 2rem;\\n    font-weight: bold;\\n    text-align: start;\\n    margin: 1rem auto;\\n} \\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{\\n    font-size: 2rem;\\n    display: inline-block;\\n    font-weight: bold;\\n    padding: 2rem 1rem;\\n    margin: 1rem auto;\\n    border-radius: .5rem;\\n    background-color: #fafafa;\\n    color: #1e3799;\\n    padding: 1rem 2rem;\\n    transition: all .4s ease-in-out;\\n\\n}\\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{\\n    background-color: #1e3799;\\n    color: #fff;\\n}\\n.btn-poster[_ngcontent-%COMP%]{\\n    background-color: #1e3799;\\n    color: #fff;\\n    cursor: pointer;\\n    border: none;\\n    font-weight:600;\\n    padding: 1rem 2rem;\\n    border-radius: 5px;\\n  }\\nfigure[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\\n    display: flex;\\n    background-color: #1e3799;\\n    color: #fff;\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    margin: 1rem;\\n    border-radius: .5rem;\\n    padding: 1.5rem;\\n    cursor: pointer;\\n    transition: all .4s ease-in-out;\\n}\\nfigure[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{\\n   color: rgb(255, 255, 255);\\n   background-color: red;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9mb3J1bS9mb3J1bS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtJQUNJLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsaUJBQWlCOztBQUVyQjtBQUNBO0lBQ0ksZUFBZTtJQUNmLFdBQVc7SUFDWCxpQkFBaUI7SUFDakIsaUJBQWlCO0lBQ2pCLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksaUJBQWlCO0lBQ2pCLGlCQUFpQjtJQUNqQix3QkFBd0I7SUFDeEIsZ0JBQWdCO0FBQ3BCO0FBQ0E7SUFDSSxtQkFBbUI7QUFDdkI7QUFDQTtJQUNJLGlCQUFpQjtJQUNqQiwwQ0FBMEM7SUFDMUMsa0JBQWtCO0lBQ2xCLHNCQUFzQjtJQUN0QixxQkFBcUI7O0lBRXJCOzRDQUN3QztJQUN4QyxtQkFBbUI7SUFDbkIsYUFBYTtJQUNiLGtCQUFrQjs7QUFFdEI7QUFDQTtJQUNJLFlBQVk7SUFDWixhQUFhO0lBQ2IsbUJBQW1CO0FBQ3ZCO0FBQ0E7SUFDSSxhQUFhO0lBQ2IsaUJBQWlCOztBQUVyQjtBQUNBO0lBQ0ksZUFBZTtBQUNuQjtBQUNBO0lBQ0ksZUFBZTtJQUNmLFdBQVc7SUFDWCxpQkFBaUI7SUFDakIsMEJBQTBCO0lBQzFCLGlCQUFpQjtJQUNqQixpQkFBaUI7QUFDckI7QUFDQTtJQUNJLDRCQUE0QjtJQUM1QiwrQkFBK0I7SUFDL0IsaUJBQWlCO0lBQ2pCLGNBQWM7QUFDbEI7QUFDQTtJQUNJLGFBQWE7SUFDYiw2QkFBNkI7SUFDN0IsbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEIsb0JBQW9CO0lBQ3BCLHlCQUF5QjtJQUN6QiwwQ0FBMEM7QUFDOUM7QUFDQTtJQUNJLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsb0JBQW9CO0lBQ3BCLFlBQVk7SUFDWix5QkFBeUI7SUFDekIsd0JBQXdCO0FBQzVCO0FBQ0E7SUFDSSxlQUFlO0lBQ2YsaUJBQWlCO0lBQ2pCLGlCQUFpQjtJQUNqQixpQkFBaUI7QUFDckI7QUFDQTtJQUNJLGVBQWU7SUFDZixxQkFBcUI7SUFDckIsaUJBQWlCO0lBQ2pCLGtCQUFrQjtJQUNsQixpQkFBaUI7SUFDakIsb0JBQW9CO0lBQ3BCLHlCQUF5QjtJQUN6QixjQUFjO0lBQ2Qsa0JBQWtCO0lBQ2xCLCtCQUErQjs7QUFFbkM7QUFDQTtJQUNJLHlCQUF5QjtJQUN6QixXQUFXO0FBQ2Y7QUFDQTtJQUNJLHlCQUF5QjtJQUN6QixXQUFXO0lBQ1gsZUFBZTtJQUNmLFlBQVk7SUFDWixlQUFlO0lBQ2Ysa0JBQWtCO0lBQ2xCLGtCQUFrQjtFQUNwQjtBQUNGO0lBQ0ksYUFBYTtJQUNiLHlCQUF5QjtJQUN6QixXQUFXO0lBQ1gsa0JBQWtCO0lBQ2xCLE1BQU07SUFDTixRQUFRO0lBQ1IsWUFBWTtJQUNaLG9CQUFvQjtJQUNwQixlQUFlO0lBQ2YsZUFBZTtJQUNmLCtCQUErQjtBQUNuQztBQUNBO0dBQ0cseUJBQXlCO0dBQ3pCLHFCQUFxQjtBQUN4QiIsInNvdXJjZXNDb250ZW50IjpbIlxubWFpbntcbiAgICBwYWRkaW5nOiAxcmVtO1xuICAgIG1heC13aWR0aDogMTQwcmVtO1xuICAgIG1hcmdpbjogMXJlbSBhdXRvO1xuICAgIFxufVxubWFpbiBoMntcbiAgICBmb250LXNpemU6IDRyZW07XG4gICAgY29sb3I6ICNmZmY7XG4gICAgbWFyZ2luOiAycmVtIGF1dG87XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuaDN7XG4gICAgZm9udC1zaXplOiAxLjhyZW07XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgbWFyZ2luOiAwIGF1dG8gMXJlbSBhdXRvO1xuICAgIGNvbG9yOiAjMDAwMDAwZDU7XG59XG5oMyBzcGFue1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG59XG5maWd1cmV7XG4gICAgbWFyZ2luOiAycmVtIGF1dG87XG4gICAgYm94LXNoYWRvdzogMCAwIC41cmVtIHJnYmEoMCwgMCwgMCwgMC4xNzkpO1xuICAgIHBhZGRpbmc6IDFyZW0gMnJlbTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGJvcmRlci1yYWRpdXM6IC43NXJlbTtcblxuICAgIGJveC1zaGFkb3c6ICAuNXJlbSAuNXJlbSAxcmVtICMwMDAwMDAzZCxcbiAgICAgICAgICAgICAgICAtLjVyZW0gLS41cmVtIDFyZW0gI2ZmZmZmZjMxO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbn1cbmZpZ3VyZSBpbWd7XG4gICAgd2lkdGg6IDE1cmVtO1xuICAgIGhlaWdodDogMTVyZW07XG4gICAgb2JqZWN0LWZpdDogY29udGFpbjtcbn1cbmZpZ3VyZSBmaWdjYXB0aW9ue1xuICAgIHBhZGRpbmc6IDFyZW07XG4gICAgbWFyZ2luOiAwcmVtIDJyZW07XG4gICAgXG59XG5maWd1cmUgZmlnY2FwdGlvbiBwe1xuICAgIHBhZGRpbmc6IDFyZW0gMDtcbn1cbmZpZ3VyZSBmaWdjYXB0aW9uIGgye1xuICAgIGZvbnQtc2l6ZTogM3JlbTtcbiAgICBjb2xvcjogIzAwMDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcbiAgICB0ZXh0LWFsaWduOiBzdGFydDtcbiAgICBtYXJnaW46IDFyZW0gYXV0bztcbn1cbnRpbWV7XG4gICAgZm9udC1zaXplOiAxLjhyZW0gIWltcG9ydGFudDtcbiAgICBmb250LXdlaWdodDogcmVndWxhciAhaW1wb3J0YW50O1xuICAgIHRleHQtYWxpZ246IHN0YXJ0O1xuICAgIGNvbG9yOiAjMDAxMzQzO1xufVxuLmZpbHRlci1zZWN0aW9ue1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBtYXJnaW46IDFyZW0gYXV0bztcbiAgICBwYWRkaW5nOiAxcmVtIDJyZW07XG4gICAgYm9yZGVyLXJhZGl1czogLjVyZW07XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTtcbiAgICBib3gtc2hhZG93OiAwIDAgLjVyZW0gcmdiYSgwLCAwLCAwLCAwLjE3OSk7XG59XG4uZmlsdGVyLXNlY3Rpb24gaW5wdXR7XG4gICAgcGFkZGluZzogMXJlbTtcbiAgICBtYXJnaW46IDFyZW0gYXV0bztcbiAgICBib3JkZXItcmFkaXVzOiAuNXJlbTtcbiAgICB3aWR0aDogNjByZW07XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNztcbiAgICBib3JkZXI6IHNvbGlkIC4xcmVtICNjY2M7XG59XG5maWd1cmUgZmlnY2FwdGlvbiB0aW1le1xuICAgIGZvbnQtc2l6ZTogMnJlbTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICB0ZXh0LWFsaWduOiBzdGFydDtcbiAgICBtYXJnaW46IDFyZW0gYXV0bztcbn0gXG5maWd1cmUgZmlnY2FwdGlvbiBhe1xuICAgIGZvbnQtc2l6ZTogMnJlbTtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgcGFkZGluZzogMnJlbSAxcmVtO1xuICAgIG1hcmdpbjogMXJlbSBhdXRvO1xuICAgIGJvcmRlci1yYWRpdXM6IC41cmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7XG4gICAgY29sb3I6ICMxZTM3OTk7XG4gICAgcGFkZGluZzogMXJlbSAycmVtO1xuICAgIHRyYW5zaXRpb246IGFsbCAuNHMgZWFzZS1pbi1vdXQ7XG5cbn1cbmZpZ3VyZSBmaWdjYXB0aW9uIGE6aG92ZXJ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzFlMzc5OTtcbiAgICBjb2xvcjogI2ZmZjtcbn1cbi5idG4tcG9zdGVye1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMxZTM3OTk7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBmb250LXdlaWdodDo2MDA7XG4gICAgcGFkZGluZzogMXJlbSAycmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgfVxuZmlndXJlIGJ1dHRvbntcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMxZTM3OTk7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICByaWdodDogMDtcbiAgICBtYXJnaW46IDFyZW07XG4gICAgYm9yZGVyLXJhZGl1czogLjVyZW07XG4gICAgcGFkZGluZzogMS41cmVtO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBhbGwgLjRzIGVhc2UtaW4tb3V0O1xufVxuZmlndXJlIGJ1dHRvbjpob3ZlcntcbiAgIGNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7XG4gICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { ForumComponent };","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r2","formatDateTime","getLastActivityDate","post_r1","ɵɵelement","ɵɵtemplate","ForumComponent_figure_9_div_16_Template","ForumComponent_figure_9_div_17_Template","ɵɵlistener","ForumComponent_figure_9_Template_button_click_20_listener","restoredCtx","ɵɵrestoreView","_r6","$implicit","ctx_r5","ɵɵnextContext","ɵɵresetView","deletePost","id","ɵɵpropertyInterpolate","image","ɵɵsanitizeUrl","autreProbleme","objet","ɵɵtextInterpolate","ctx_r0","date","auteur","resume","ɵɵproperty","replies","length","ɵɵpureFunction1","_c0","ForumComponent","constructor","forumService","searchText","filteredPosts","lastActivityDate","posts","allPosts","getProblems","sortedPosts","sort","a","b","lastActivityDateA","Date","lastActivityDateB","publicationDateA","timestamp","publicationDateB","isNaN","getTime","postId","filterPosts","filter","post","toLowerCase","includes","dateTime","setHours","getHours","options","day","month","year","hour","minute","hour12","timeZone","formatter","Intl","DateTimeFormat","format","ɵɵdirectiveInject","i1","ForumService","selectors","decls","vars","consts","template","ForumComponent_Template","rf","ctx","ForumComponent_Template_input_ngModelChange_6_listener","$event","ForumComponent_Template_input_input_6_listener","ForumComponent_figure_9_Template"],"sources":["/Users/vithushan/Desktop/vithushan.nosync/Code/Java/projetAnnuel2023/angular/vecoelo/src/app/components/forum/forum.component.ts","/Users/vithushan/Desktop/vithushan.nosync/Code/Java/projetAnnuel2023/angular/vecoelo/src/app/components/forum/forum.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ForumService } from './forum.service';\n\n@Component({\n  selector: 'forum',\n  templateUrl: 'forum.component.html',\n  styleUrls: ['forum.component.css']\n})\nexport class ForumComponent {\n  constructor(private forumService: ForumService) { this.lastActivityDate = null; }\n  searchText: string = '';\n  filteredPosts: any[] = [];\n  lastActivityDate: string | null;;\n\n  get posts() {\n    // Récupérer les publications du service\n    const allPosts = this.forumService.getProblems();\n  \n    const sortedPosts = allPosts.sort((a, b) => {\n      const lastActivityDateA = new Date(this.getLastActivityDate(a));\n      const lastActivityDateB = new Date(this.getLastActivityDate(b));\n      const publicationDateA = new Date(a.timestamp);\n      const publicationDateB = new Date(b.timestamp);\n  \n      if (isNaN(lastActivityDateA.getTime())) {\n        return 1; // Gérer le cas où la dernière activité de la publication A est invalide\n      }\n  \n      if (isNaN(lastActivityDateB.getTime())) {\n        return -1; // Gérer le cas où la dernière activité de la publication B est invalide\n      }\n  \n      // Tri par la dernière activité\n      if (lastActivityDateB.getTime() !== lastActivityDateA.getTime()) {\n        return lastActivityDateB.getTime() - lastActivityDateA.getTime();\n      }\n  \n      // Tri par la dernière publication si les dernières activités sont les mêmes\n      return publicationDateB.getTime() - publicationDateA.getTime();\n    });\n  \n    return sortedPosts;\n  }\n \n  deletePost(postId: string) {\n    this.forumService.deletePost(postId);\n  }\n  filterPosts() {\n    if (this.searchText) {\n      this.filteredPosts = this.posts.filter(post =>\n        post.objet.toLowerCase().includes(this.searchText.toLowerCase()) ||\n        (post.autreProbleme && post.autreProbleme.toLowerCase().includes(this.searchText.toLowerCase()))\n      );\n    } else {\n      this.filteredPosts = this.posts;\n    }\n  }\n  getLastActivityDate(post: any): string {\n    const replies = post.replies;\n    if (replies && replies.length > 0) {\n      return replies[replies.length - 1].lastActivityDate;\n    } else {\n      return \"Aucune activité\";\n    }\n  }\n  \n\n\n  formatDateTime(dateTime: string): string {\n    if (!dateTime) {\n      return \"\"; // Gérer le cas où dateTime est vide ou non défini\n    }\n\n\n\n    const date = new Date(dateTime);\n    date.setHours(date.getHours() + 2);\n    const options: Intl.DateTimeFormatOptions = {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric' as const,\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n      timeZone: 'UTC'\n    };\n    const formatter = new Intl.DateTimeFormat('fr-FR', options);\n    if (isNaN(date.getTime())) {\n      return \"\"; // Gérer le cas où dateTime n'est pas une date valide\n    }\n    return formatter.format(date);\n  }\n  \n\n\n}\n","<main>\n  <h2>FORUM</h2>\n  <section class=\"filter-section\">\n    <button class=\"btn-poster\" routerLink=\"/post-probleme\">nouveau problème</button>\n    <input type=\"text\" [(ngModel)]=\"searchText\" (input)=\"filterPosts()\" placeholder=\"Rechercher...\">\n    <button class=\"btn-poster\" onclick=\"location.reload()\">Actualiser</button>\n    \n  </section>\n\n  <figure *ngFor=\"let post of (filteredPosts.length > 0 ? filteredPosts : posts)\">\n    <img src=\"{{ post.image }}\" alt=\"\">\n    <figcaption>\n      <h2>{{ post.autreProbleme || post.objet }} <time>{{ formatDateTime(post.date) }}</time></h2>\n      <h3><span>de</span> {{ post.auteur }} </h3>\n      <p><strong>Sujet :</strong> {{ post.resume }}</p>\n      <div class=\"post-activity\">\n        <div *ngIf=\"post.replies && post.replies.length > 0\">\n          <div>Dernière activité : {{ formatDateTime(getLastActivityDate(post)) }}</div>\n        </div>\n        <div *ngIf=\"!(post.replies && post.replies.length > 0)\">\n          <div>Aucune activité</div>\n        </div>\n      </div>\n      <a [routerLink]=\"['/post', post.id]\">Voir la publication</a>\n          \n    </figcaption>\n    <button class=\"delete-button\" (click)=\"deletePost(post.id)\">\n      <i class=\"material-icons\">delete</i>\n    </button>  \n  </figure>\n</main>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}