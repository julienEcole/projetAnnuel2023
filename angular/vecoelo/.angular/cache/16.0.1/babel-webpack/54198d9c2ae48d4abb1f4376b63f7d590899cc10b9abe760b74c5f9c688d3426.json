{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/components/forum/forum.service\";\nimport * as i3 from \"src/app/components/login/user.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction PostComponent_li_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"div\")(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\")(6, \"time\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function PostComponent_li_22_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const reply_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.deleteReply(reply_r2));\n    });\n    i0.ɵɵtext(9, \"X\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const reply_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", reply_r2.auteur, \" :\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", reply_r2.message, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.formatDateTime(reply_r2.timestamp));\n  }\n}\nclass PostComponent {\n  constructor(route, forumService, userService // Ajoutez cette ligne\n  ) {\n    this.route = route;\n    this.forumService = forumService;\n    this.userService = userService;\n  }\n  ngOnInit() {\n    this.route.paramMap.subscribe(params => {\n      const postId = params.get('id');\n      if (postId) {\n        this.postId = postId;\n        this.post = this.forumService.getPostById(this.postId);\n      }\n    });\n  }\n  submitReply() {\n    const utilisateurConnecte = this.userService.utilisateurConnecte;\n    if (utilisateurConnecte) {\n      this.post.auteur = utilisateurConnecte.pseudo;\n    }\n    const reply = {\n      message: this.replyMessage,\n      timestamp: new Date(),\n      lastActivityDate: new Date(),\n      auteur: this.userService.utilisateurConnecte?.pseudo || \"anonymous\"\n    };\n    this.forumService.addReplyToPost(this.postId, reply);\n    this.replyMessage = '';\n    window.location.reload();\n  }\n  deleteReply(reply) {\n    this.forumService.deleteReplyFromPost(this.postId, reply);\n    this.post.replies = this.post.replies.filter(r => r.message !== reply.message);\n  }\n  formatDateTime(dateTime) {\n    const date = new Date(dateTime);\n    date.setHours(date.getHours() + 2);\n    const options = {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n      timeZone: 'UTC'\n    };\n    const formatter = new Intl.DateTimeFormat('fr-FR', options);\n    return formatter.format(date);\n  }\n}\nPostComponent.ɵfac = function PostComponent_Factory(t) {\n  return new (t || PostComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ForumService), i0.ɵɵdirectiveInject(i3.UserService));\n};\nPostComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostComponent,\n  selectors: [[\"app-post\"]],\n  decls: 28,\n  vars: 8,\n  consts: [[1, \"post\"], [\"routerLink\", \"/forum\", 1, \"btn-forum\"], [\"alt\", \"\", 3, \"src\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngSubmit\"], [\"replyForm\", \"ngForm\"], [\"name\", \"replyMessage\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 3, \"disabled\"], [3, \"click\"]],\n  template: function PostComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"main\")(1, \"h2\");\n      i0.ɵɵtext(2, \"POST\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 0)(4, \"button\", 1);\n      i0.ɵɵtext(5, \" Retour \\u00E0 la liste des posts\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"figure\");\n      i0.ɵɵelement(7, \"img\", 2);\n      i0.ɵɵelementStart(8, \"figcaption\")(9, \"h2\");\n      i0.ɵɵtext(10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"h3\")(12, \"span\");\n      i0.ɵɵtext(13, \"de\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"time\");\n      i0.ɵɵtext(16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"p\");\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"h3\");\n      i0.ɵɵtext(20, \"R\\u00E9ponses\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"ul\");\n      i0.ɵɵtemplate(22, PostComponent_li_22_Template, 10, 3, \"li\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"form\", 4, 5);\n      i0.ɵɵlistener(\"ngSubmit\", function PostComponent_Template_form_ngSubmit_23_listener() {\n        return ctx.submitReply();\n      });\n      i0.ɵɵelementStart(25, \"textarea\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function PostComponent_Template_textarea_ngModelChange_25_listener($event) {\n        return ctx.replyMessage = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"button\", 7);\n      i0.ɵɵtext(27, \"Envoyer\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(24);\n      i0.ɵɵadvance(7);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.post.image, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", ctx.post.autreProbleme ? ctx.post.autreProbleme : ctx.post.objet, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", ctx.post.auteur, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.formatDateTime(ctx.post.date));\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.post.resume);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.post.replies);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.replyMessage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", _r1.invalid);\n    }\n  },\n  dependencies: [i4.NgForOf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm, i1.RouterLink],\n  styles: [\"main[_ngcontent-%COMP%]{\\n    padding: 1rem;\\n    max-width: 140rem;\\n    margin: 1rem auto;\\n}\\nmain[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\n    font-size: 4rem;\\n    color: #fff;\\n    margin: 2rem auto;\\n    font-weight: bold;\\n    text-align: center;\\n}\\nmain[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{\\n    margin: 1rem auto;\\n    border: solid .1rem #ccc;\\n    padding: 2rem;\\n    display: flex;\\n    border-radius: .5rem;\\n}\\nfigure[_ngcontent-%COMP%]{\\n    margin: 1rem auto;\\n    border: solid .1rem #ccc;\\n    padding: 2rem;\\n    \\n    display: flex;\\n    align-items: center;\\n    border-radius: .5rem;\\n}\\nh3[_ngcontent-%COMP%]{\\n    font-size: 2rem;\\n    font-weight: bold;\\n    margin: 1.5rem auto auto;\\n    color: #000;\\n}\\nh3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{\\n    font-weight: normal;\\n}\\n.post[_ngcontent-%COMP%]{\\n    padding:3rem;\\n    background-color: #fff;\\n    border-radius: .75rem;\\n\\n    box-shadow:  .5rem .5rem 1rem #0000003d,\\n                -.5rem -.5rem 1rem #ffffff31;\\n}\\nfigure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\\n    width: 20rem;\\n    height: 20rem;\\n    object-fit: cover;\\n}\\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{\\n    padding: 2rem;\\n    line-height: 2.5rem;\\n}\\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\\n    padding: 2rem 0;\\n}\\nfigure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\n    font-size: 3rem;\\n    font-weight: bold;\\n    text-transform: capitalize;\\n    text-align: start;\\n    margin: 1rem auto;\\n    color: #000;\\n}\\nmain[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{\\n    flex-direction: column;\\n    margin: 1rem auto;\\n    padding: 1rem 2rem;\\n    border-radius: .5rem;\\n\\n}\\nmain[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{\\n    padding: 2rem 4rem;\\n    position: relative;\\n    margin: 1rem auto;\\n    border-radius: .5rem;\\n    background-color: #eeeeee;\\n}\\nmain[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{\\n    font-weight: bold;\\n}\\nmain[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2n+1){\\n    background-color: #f3f3f3;\\n}\\nmain[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{\\n    width: 100%;\\n    height: 10rem;\\n    padding: 1rem;\\n    margin: 1rem auto;\\n    border-radius: .5rem;\\n\\n    resize: none;\\n}\\nmain[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\\n    position: absolute;\\n    border: none;\\n    align-items: center;\\n    background-color: #c2c2c2;\\n    padding: 1rem 1.5rem;\\n    margin: 2rem;\\n    top: 0;\\n    right: 0;\\n}\\nmain[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\\n    padding: 1rem 2rem;\\n    margin: 0 1rem auto auto;\\n    border-radius: 0.5rem;\\n    cursor: pointer;\\n}\\n.btn-forum[_ngcontent-%COMP%]{\\n    text-decoration:none;\\n    font-size:1.5rem;\\n    font-weight: bold;\\n    cursor: pointer;\\n    background-color: #1e3799;\\n    color: #fff;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvcG9zdC1wcm9ibGVtZS9wb3N0L3Bvc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsaUJBQWlCO0FBQ3JCO0FBQ0E7SUFDSSxlQUFlO0lBQ2YsV0FBVztJQUNYLGlCQUFpQjtJQUNqQixpQkFBaUI7SUFDakIsa0JBQWtCO0FBQ3RCO0FBQ0E7SUFDSSxpQkFBaUI7SUFDakIsd0JBQXdCO0lBQ3hCLGFBQWE7SUFDYixhQUFhO0lBQ2Isb0JBQW9CO0FBQ3hCO0FBQ0E7SUFDSSxpQkFBaUI7SUFDakIsd0JBQXdCO0lBQ3hCLGFBQWE7O0lBRWIsYUFBYTtJQUNiLG1CQUFtQjtJQUNuQixvQkFBb0I7QUFDeEI7QUFDQTtJQUNJLGVBQWU7SUFDZixpQkFBaUI7SUFDakIsd0JBQXdCO0lBQ3hCLFdBQVc7QUFDZjtBQUNBO0lBQ0ksbUJBQW1CO0FBQ3ZCO0FBQ0E7SUFDSSxZQUFZO0lBQ1osc0JBQXNCO0lBQ3RCLHFCQUFxQjs7SUFFckI7NENBQ3dDO0FBQzVDO0FBQ0E7SUFDSSxZQUFZO0lBQ1osYUFBYTtJQUNiLGlCQUFpQjtBQUNyQjtBQUNBO0lBQ0ksYUFBYTtJQUNiLG1CQUFtQjtBQUN2QjtBQUNBO0lBQ0ksZUFBZTtBQUNuQjtBQUNBO0lBQ0ksZUFBZTtJQUNmLGlCQUFpQjtJQUNqQiwwQkFBMEI7SUFDMUIsaUJBQWlCO0lBQ2pCLGlCQUFpQjtJQUNqQixXQUFXO0FBQ2Y7QUFDQTtJQUNJLHNCQUFzQjtJQUN0QixpQkFBaUI7SUFDakIsa0JBQWtCO0lBQ2xCLG9CQUFvQjs7QUFFeEI7QUFDQTtJQUNJLGtCQUFrQjtJQUNsQixrQkFBa0I7SUFDbEIsaUJBQWlCO0lBQ2pCLG9CQUFvQjtJQUNwQix5QkFBeUI7QUFDN0I7QUFDQTtJQUNJLGlCQUFpQjtBQUNyQjtBQUNBO0lBQ0kseUJBQXlCO0FBQzdCO0FBQ0E7SUFDSSxXQUFXO0lBQ1gsYUFBYTtJQUNiLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsb0JBQW9COztJQUVwQixZQUFZO0FBQ2hCO0FBQ0E7SUFDSSxrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLG1CQUFtQjtJQUNuQix5QkFBeUI7SUFDekIsb0JBQW9CO0lBQ3BCLFlBQVk7SUFDWixNQUFNO0lBQ04sUUFBUTtBQUNaO0FBQ0E7SUFDSSxrQkFBa0I7SUFDbEIsd0JBQXdCO0lBQ3hCLHFCQUFxQjtJQUNyQixlQUFlO0FBQ25CO0FBQ0E7SUFDSSxvQkFBb0I7SUFDcEIsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtJQUNqQixlQUFlO0lBQ2YseUJBQXlCO0lBQ3pCLFdBQVc7RUFDYiIsInNvdXJjZXNDb250ZW50IjpbIm1haW57XG4gICAgcGFkZGluZzogMXJlbTtcbiAgICBtYXgtd2lkdGg6IDE0MHJlbTtcbiAgICBtYXJnaW46IDFyZW0gYXV0bztcbn1cbm1haW4gaDJ7XG4gICAgZm9udC1zaXplOiA0cmVtO1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIG1hcmdpbjogMnJlbSBhdXRvO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbm1haW4gZmlndXJle1xuICAgIG1hcmdpbjogMXJlbSBhdXRvO1xuICAgIGJvcmRlcjogc29saWQgLjFyZW0gI2NjYztcbiAgICBwYWRkaW5nOiAycmVtO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYm9yZGVyLXJhZGl1czogLjVyZW07XG59XG5maWd1cmV7XG4gICAgbWFyZ2luOiAxcmVtIGF1dG87XG4gICAgYm9yZGVyOiBzb2xpZCAuMXJlbSAjY2NjO1xuICAgIHBhZGRpbmc6IDJyZW07XG4gICAgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGJvcmRlci1yYWRpdXM6IC41cmVtO1xufVxuaDN7XG4gICAgZm9udC1zaXplOiAycmVtO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIG1hcmdpbjogMS41cmVtIGF1dG8gYXV0bztcbiAgICBjb2xvcjogIzAwMDtcbn1cbmgzIHNwYW57XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbn1cbi5wb3N0e1xuICAgIHBhZGRpbmc6M3JlbTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGJvcmRlci1yYWRpdXM6IC43NXJlbTtcblxuICAgIGJveC1zaGFkb3c6ICAuNXJlbSAuNXJlbSAxcmVtICMwMDAwMDAzZCxcbiAgICAgICAgICAgICAgICAtLjVyZW0gLS41cmVtIDFyZW0gI2ZmZmZmZjMxO1xufVxuZmlndXJlIGltZ3tcbiAgICB3aWR0aDogMjByZW07XG4gICAgaGVpZ2h0OiAyMHJlbTtcbiAgICBvYmplY3QtZml0OiBjb3Zlcjtcbn1cbmZpZ3VyZSBmaWdjYXB0aW9ue1xuICAgIHBhZGRpbmc6IDJyZW07XG4gICAgbGluZS1oZWlnaHQ6IDIuNXJlbTtcbn1cbmZpZ3VyZSBmaWdjYXB0aW9uIHB7XG4gICAgcGFkZGluZzogMnJlbSAwO1xufVxuZmlndXJlIGZpZ2NhcHRpb24gaDJ7XG4gICAgZm9udC1zaXplOiAzcmVtO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xuICAgIHRleHQtYWxpZ246IHN0YXJ0O1xuICAgIG1hcmdpbjogMXJlbSBhdXRvO1xuICAgIGNvbG9yOiAjMDAwO1xufVxubWFpbiB1bHtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG1hcmdpbjogMXJlbSBhdXRvO1xuICAgIHBhZGRpbmc6IDFyZW0gMnJlbTtcbiAgICBib3JkZXItcmFkaXVzOiAuNXJlbTtcblxufVxubWFpbiB1bCBsaXtcbiAgICBwYWRkaW5nOiAycmVtIDRyZW07XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG1hcmdpbjogMXJlbSBhdXRvO1xuICAgIGJvcmRlci1yYWRpdXM6IC41cmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7XG59XG5tYWluIHVsIGxpIGRpdiBzcGFue1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxubWFpbiB1bCBsaTpudGgtY2hpbGQoMm4rMSl7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YzZjNmMztcbn1cbm1haW4gdGV4dGFyZWF7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMHJlbTtcbiAgICBwYWRkaW5nOiAxcmVtO1xuICAgIG1hcmdpbjogMXJlbSBhdXRvO1xuICAgIGJvcmRlci1yYWRpdXM6IC41cmVtO1xuXG4gICAgcmVzaXplOiBub25lO1xufVxubWFpbiB1bCBsaSBidXR0b257XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNjMmMyYzI7XG4gICAgcGFkZGluZzogMXJlbSAxLjVyZW07XG4gICAgbWFyZ2luOiAycmVtO1xuICAgIHRvcDogMDtcbiAgICByaWdodDogMDtcbn1cbm1haW4gYnV0dG9ue1xuICAgIHBhZGRpbmc6IDFyZW0gMnJlbTtcbiAgICBtYXJnaW46IDAgMXJlbSBhdXRvIGF1dG87XG4gICAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cbi5idG4tZm9ydW17XG4gICAgdGV4dC1kZWNvcmF0aW9uOm5vbmU7XG4gICAgZm9udC1zaXplOjEuNXJlbTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzFlMzc5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});\nexport { PostComponent };","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","PostComponent_li_22_Template_button_click_8_listener","restoredCtx","ɵɵrestoreView","_r4","reply_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","deleteReply","ɵɵadvance","ɵɵtextInterpolate1","auteur","message","ɵɵtextInterpolate","ctx_r0","formatDateTime","timestamp","PostComponent","constructor","route","forumService","userService","ngOnInit","paramMap","subscribe","params","postId","get","post","getPostById","submitReply","utilisateurConnecte","pseudo","reply","replyMessage","Date","lastActivityDate","addReplyToPost","window","location","reload","deleteReplyFromPost","replies","filter","r","dateTime","date","setHours","getHours","options","day","month","year","hour","minute","hour12","timeZone","formatter","Intl","DateTimeFormat","format","ɵɵdirectiveInject","i1","ActivatedRoute","i2","ForumService","i3","UserService","selectors","decls","vars","consts","template","PostComponent_Template","rf","ctx","ɵɵelement","ɵɵtemplate","PostComponent_li_22_Template","PostComponent_Template_form_ngSubmit_23_listener","PostComponent_Template_textarea_ngModelChange_25_listener","$event","ɵɵpropertyInterpolate","image","ɵɵsanitizeUrl","autreProbleme","objet","resume","ɵɵproperty","_r1","invalid"],"sources":["/Users/vithushan/Desktop/vithushan.nosync/Code/Java/projetAnnuel2023/angular/vecoelo/src/app/pages/post-probleme/post/post.component.ts","/Users/vithushan/Desktop/vithushan.nosync/Code/Java/projetAnnuel2023/angular/vecoelo/src/app/pages/post-probleme/post/post.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { last } from 'rxjs';\nimport { ForumService } from 'src/app/components/forum/forum.service';\nimport { UserService } from 'src/app/components/login/user.service'; // Ajoutez cette ligne\n\n@Component({\n  selector: 'app-post',\n  templateUrl: './post.component.html',\n  styleUrls: ['./post.component.css']\n})\nexport class PostComponent implements OnInit {\n  postId!: string;\n  post: any;\n  replyMessage!: string;\n\n  constructor(\n    private route: ActivatedRoute,\n    private forumService: ForumService,\n    private userService: UserService // Ajoutez cette ligne\n  ) {}\n\n  ngOnInit() {\n    this.route.paramMap.subscribe(params => {\n      const postId = params.get('id');\n      if (postId) {\n        this.postId = postId;\n        this.post = this.forumService.getPostById(this.postId);\n      }\n    });\n  }\n\n  submitReply() {\n    const utilisateurConnecte = this.userService.utilisateurConnecte;\n    if (utilisateurConnecte) {\n      this.post.auteur = utilisateurConnecte.pseudo;\n    }\n    const reply = {\n      message: this.replyMessage,\n      timestamp: new Date(),\n      lastActivityDate: new Date(),\n      auteur: this.userService.utilisateurConnecte?.pseudo || \"anonymous\",\n      \n    };\n    \n    this.forumService.addReplyToPost(this.postId, reply);\n    this.replyMessage = ''; \n    window.location.reload();\n  }\n  deleteReply(reply: any) {\n    this.forumService.deleteReplyFromPost(this.postId, reply);\n    this.post.replies = this.post.replies.filter((r: any) => r.message !== reply.message);\n  }\n  formatDateTime(dateTime: string): string {\n    const date = new Date(dateTime);\n    date.setHours(date.getHours() + 2);\n    const options: Intl.DateTimeFormatOptions = {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric' as const,\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n      timeZone: 'UTC'\n      \n    };\n    const formatter = new Intl.DateTimeFormat('fr-FR', options);\n    return formatter.format(date);\n  }\n  \n}\n","<main>\n    <h2>POST</h2>\n    <div class=\"post\">\n      <button class=\"btn-forum\" routerLink=\"/forum\"> Retour à la liste des posts</button>\n      <figure>\n        <img src=\"{{ post.image }}\" alt=\"\">\n        <figcaption>\n          <h2> {{ post.autreProbleme ? post.autreProbleme : post.objet }}</h2>\n          <h3><span>de</span> {{ post.auteur }}</h3>\n          <time>{{ formatDateTime(post.date) }}</time>\n          <p>{{ post.resume }}</p>\n        </figcaption>\n      </figure>\n    \n      <h3>Réponses</h3>\n      <ul>\n          <li *ngFor=\"let reply of post.replies\">\n            <div><span>{{ reply.auteur }} :</span> {{ reply.message }}</div>\n            <div>\n              <time>{{ formatDateTime(reply.timestamp) }}</time>\n            </div>\n            <button (click)=\"deleteReply(reply)\">X</button>\n          </li>\n      </ul>\n    \n      <form (ngSubmit)=\"submitReply()\" #replyForm=\"ngForm\">\n          <textarea [(ngModel)]=\"replyMessage\" name=\"replyMessage\" required></textarea>\n          <button type=\"submit\" [disabled]=\"replyForm.invalid\">Envoyer</button>\n        </form>\n    </div>\n    \n    \n  </main>\n  "],"mappings":";;;;;;;;;ICgBUA,EAAA,CAAAC,cAAA,SAAuC;IAC1BD,EAAA,CAAAE,MAAA,GAAoB;IAAAF,EAAA,CAAAG,YAAA,EAAO;IAACH,EAAA,CAAAE,MAAA,GAAmB;IAAAF,EAAA,CAAAG,YAAA,EAAM;IAChEH,EAAA,CAAAC,cAAA,UAAK;IACGD,EAAA,CAAAE,MAAA,GAAqC;IAAAF,EAAA,CAAAG,YAAA,EAAO;IAEpDH,EAAA,CAAAC,cAAA,gBAAqC;IAA7BD,EAAA,CAAAI,UAAA,mBAAAC,qDAAA;MAAA,MAAAC,WAAA,GAAAN,EAAA,CAAAO,aAAA,CAAAC,GAAA;MAAA,MAAAC,QAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,MAAAC,MAAA,GAAAX,EAAA,CAAAY,aAAA;MAAA,OAASZ,EAAA,CAAAa,WAAA,CAAAF,MAAA,CAAAG,WAAA,CAAAL,QAAA,CAAkB;IAAA,EAAC;IAACT,EAAA,CAAAE,MAAA,QAAC;IAAAF,EAAA,CAAAG,YAAA,EAAS;;;;;IAJpCH,EAAA,CAAAe,SAAA,GAAoB;IAApBf,EAAA,CAAAgB,kBAAA,KAAAP,QAAA,CAAAQ,MAAA,OAAoB;IAAQjB,EAAA,CAAAe,SAAA,GAAmB;IAAnBf,EAAA,CAAAgB,kBAAA,MAAAP,QAAA,CAAAS,OAAA,KAAmB;IAElDlB,EAAA,CAAAe,SAAA,GAAqC;IAArCf,EAAA,CAAAmB,iBAAA,CAAAC,MAAA,CAAAC,cAAA,CAAAZ,QAAA,CAAAa,SAAA,EAAqC;;;ADbzD,MAKaC,aAAa;EAKxBC,YACUC,KAAqB,EACrBC,YAA0B,EAC1BC,WAAwB,CAAC;EAAA,E;IAFzB,KAAAF,KAAK,GAALA,KAAK;IACL,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,WAAW,GAAXA,WAAW;EAClB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACH,KAAK,CAACI,QAAQ,CAACC,SAAS,CAACC,MAAM,IAAG;MACrC,MAAMC,MAAM,GAAGD,MAAM,CAACE,GAAG,CAAC,IAAI,CAAC;MAC/B,IAAID,MAAM,EAAE;QACV,IAAI,CAACA,MAAM,GAAGA,MAAM;QACpB,IAAI,CAACE,IAAI,GAAG,IAAI,CAACR,YAAY,CAACS,WAAW,CAAC,IAAI,CAACH,MAAM,CAAC;;IAE1D,CAAC,CAAC;EACJ;EAEAI,WAAWA,CAAA;IACT,MAAMC,mBAAmB,GAAG,IAAI,CAACV,WAAW,CAACU,mBAAmB;IAChE,IAAIA,mBAAmB,EAAE;MACvB,IAAI,CAACH,IAAI,CAACjB,MAAM,GAAGoB,mBAAmB,CAACC,MAAM;;IAE/C,MAAMC,KAAK,GAAG;MACZrB,OAAO,EAAE,IAAI,CAACsB,YAAY;MAC1BlB,SAAS,EAAE,IAAImB,IAAI,EAAE;MACrBC,gBAAgB,EAAE,IAAID,IAAI,EAAE;MAC5BxB,MAAM,EAAE,IAAI,CAACU,WAAW,CAACU,mBAAmB,EAAEC,MAAM,IAAI;KAEzD;IAED,IAAI,CAACZ,YAAY,CAACiB,cAAc,CAAC,IAAI,CAACX,MAAM,EAAEO,KAAK,CAAC;IACpD,IAAI,CAACC,YAAY,GAAG,EAAE;IACtBI,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;EAC1B;EACAhC,WAAWA,CAACyB,KAAU;IACpB,IAAI,CAACb,YAAY,CAACqB,mBAAmB,CAAC,IAAI,CAACf,MAAM,EAAEO,KAAK,CAAC;IACzD,IAAI,CAACL,IAAI,CAACc,OAAO,GAAG,IAAI,CAACd,IAAI,CAACc,OAAO,CAACC,MAAM,CAAEC,CAAM,IAAKA,CAAC,CAAChC,OAAO,KAAKqB,KAAK,CAACrB,OAAO,CAAC;EACvF;EACAG,cAAcA,CAAC8B,QAAgB;IAC7B,MAAMC,IAAI,GAAG,IAAIX,IAAI,CAACU,QAAQ,CAAC;IAC/BC,IAAI,CAACC,QAAQ,CAACD,IAAI,CAACE,QAAQ,EAAE,GAAG,CAAC,CAAC;IAClC,MAAMC,OAAO,GAA+B;MAC1CC,GAAG,EAAE,SAAS;MACdC,KAAK,EAAE,SAAS;MAChBC,IAAI,EAAE,SAAkB;MACxBC,IAAI,EAAE,SAAS;MACfC,MAAM,EAAE,SAAS;MACjBC,MAAM,EAAE,KAAK;MACbC,QAAQ,EAAE;KAEX;IACD,MAAMC,SAAS,GAAG,IAAIC,IAAI,CAACC,cAAc,CAAC,OAAO,EAAEV,OAAO,CAAC;IAC3D,OAAOQ,SAAS,CAACG,MAAM,CAACd,IAAI,CAAC;EAC/B;;AAzDW7B,aAAa,C;mBAAbA,aAAa,EAAAvB,EAAA,CAAAmE,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAArE,EAAA,CAAAmE,iBAAA,CAAAG,EAAA,CAAAC,YAAA,GAAAvE,EAAA,CAAAmE,iBAAA,CAAAK,EAAA,CAAAC,WAAA;AAAA;AAAblD,aAAa,C;QAAbA,aAAa;EAAAmD,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,uBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCX1BhF,EAAA,CAAAC,cAAA,WAAM;MACED,EAAA,CAAAE,MAAA,WAAI;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACbH,EAAA,CAAAC,cAAA,aAAkB;MAC+BD,EAAA,CAAAE,MAAA,wCAA2B;MAAAF,EAAA,CAAAG,YAAA,EAAS;MACnFH,EAAA,CAAAC,cAAA,aAAQ;MACND,EAAA,CAAAkF,SAAA,aAAmC;MACnClF,EAAA,CAAAC,cAAA,iBAAY;MACLD,EAAA,CAAAE,MAAA,IAA0D;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACpEH,EAAA,CAAAC,cAAA,UAAI;MAAMD,EAAA,CAAAE,MAAA,UAAE;MAAAF,EAAA,CAAAG,YAAA,EAAO;MAACH,EAAA,CAAAE,MAAA,IAAiB;MAAAF,EAAA,CAAAG,YAAA,EAAK;MAC1CH,EAAA,CAAAC,cAAA,YAAM;MAAAD,EAAA,CAAAE,MAAA,IAA+B;MAAAF,EAAA,CAAAG,YAAA,EAAO;MAC5CH,EAAA,CAAAC,cAAA,SAAG;MAAAD,EAAA,CAAAE,MAAA,IAAiB;MAAAF,EAAA,CAAAG,YAAA,EAAI;MAI5BH,EAAA,CAAAC,cAAA,UAAI;MAAAD,EAAA,CAAAE,MAAA,qBAAQ;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACjBH,EAAA,CAAAC,cAAA,UAAI;MACAD,EAAA,CAAAmF,UAAA,KAAAC,4BAAA,iBAMK;MACTpF,EAAA,CAAAG,YAAA,EAAK;MAELH,EAAA,CAAAC,cAAA,kBAAqD;MAA/CD,EAAA,CAAAI,UAAA,sBAAAiF,iDAAA;QAAA,OAAYJ,GAAA,CAAA7C,WAAA,EAAa;MAAA,EAAC;MAC5BpC,EAAA,CAAAC,cAAA,mBAAkE;MAAxDD,EAAA,CAAAI,UAAA,2BAAAkF,0DAAAC,MAAA;QAAA,OAAAN,GAAA,CAAAzC,YAAA,GAAA+C,MAAA;MAAA,EAA0B;MAA8BvF,EAAA,CAAAG,YAAA,EAAW;MAC7EH,EAAA,CAAAC,cAAA,iBAAqD;MAAAD,EAAA,CAAAE,MAAA,eAAO;MAAAF,EAAA,CAAAG,YAAA,EAAS;;;;MAtBlEH,EAAA,CAAAe,SAAA,GAAsB;MAAtBf,EAAA,CAAAwF,qBAAA,QAAAP,GAAA,CAAA/C,IAAA,CAAAuD,KAAA,EAAAzF,EAAA,CAAA0F,aAAA,CAAsB;MAEpB1F,EAAA,CAAAe,SAAA,GAA0D;MAA1Df,EAAA,CAAAgB,kBAAA,MAAAiE,GAAA,CAAA/C,IAAA,CAAAyD,aAAA,GAAAV,GAAA,CAAA/C,IAAA,CAAAyD,aAAA,GAAAV,GAAA,CAAA/C,IAAA,CAAA0D,KAAA,KAA0D;MAC3C5F,EAAA,CAAAe,SAAA,GAAiB;MAAjBf,EAAA,CAAAgB,kBAAA,MAAAiE,GAAA,CAAA/C,IAAA,CAAAjB,MAAA,KAAiB;MAC/BjB,EAAA,CAAAe,SAAA,GAA+B;MAA/Bf,EAAA,CAAAmB,iBAAA,CAAA8D,GAAA,CAAA5D,cAAA,CAAA4D,GAAA,CAAA/C,IAAA,CAAAkB,IAAA,EAA+B;MAClCpD,EAAA,CAAAe,SAAA,GAAiB;MAAjBf,EAAA,CAAAmB,iBAAA,CAAA8D,GAAA,CAAA/C,IAAA,CAAA2D,MAAA,CAAiB;MAME7F,EAAA,CAAAe,SAAA,GAAe;MAAff,EAAA,CAAA8F,UAAA,YAAAb,GAAA,CAAA/C,IAAA,CAAAc,OAAA,CAAe;MAU3BhD,EAAA,CAAAe,SAAA,GAA0B;MAA1Bf,EAAA,CAAA8F,UAAA,YAAAb,GAAA,CAAAzC,YAAA,CAA0B;MACdxC,EAAA,CAAAe,SAAA,GAA8B;MAA9Bf,EAAA,CAAA8F,UAAA,aAAAC,GAAA,CAAAC,OAAA,CAA8B;;;;;;SDhBjDzE,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}