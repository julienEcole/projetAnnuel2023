<main>
  <h2>FORUM</h2>
  <section class="filter-section">
    <button class="btn-poster" routerLink="/post-probleme">Nouveau problème</button>
    <button class="btn-poster" (click)="loadPosts()">Actualiser</button>
  </section>

  <figure *ngFor="let post of posts">
    <img [src]="post.image" alt="">
    <figcaption>
      <h2>{{ post.titre }}</h2>
      <h3><span>Publié par :</span> {{ post.auteur }}</h3>
      <h3><span>Adresse :</span> {{ post.adresse }}</h3>
      <p><strong>Description :</strong> {{ post.description }}</p>
      <div class="post-activity">
        <div *ngIf="post.replies && post.replies.length > 0">
          <div>Dernière activité : {{ formatDateTime(getLastActivityDate(post)) }}</div>
        </div>
        <div *ngIf="!(post.replies && post.replies.length > 0)">
          <div>Aucune activité</div>
        </div>
      </div>
      <a [routerLink]="['/post', post.probleme_id]">Voir la publication</a>
    </figcaption>
    <button class="delete-button" (click)="deletePost(post.probleme_id)">
      <i class="material-icons">delete</i>
    </button>  
  </figure>
</main>
